
<!DOCTYPE HTML>
<html lang="en" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>API Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="commons.html" />
    
    
    <link rel="prev" href="../usage/android.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../install/">
            
                <a href="../install/">
            
                    
                    Install
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../usage/">
            
                <a href="../usage/">
            
                    
                    Usage
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../usage/cna.html">
            
                <a href="../usage/cna.html">
            
                    
                    cna
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../usage/genCross.html">
            
                <a href="../usage/genCross.html">
            
                    
                    direct run
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../usage/iOS.html">
            
                <a href="../usage/iOS.html">
            
                    
                    iOS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../usage/android.html">
            
                <a href="../usage/android.html">
            
                    
                    Android
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter active" data-level="1.4" data-path="./">
            
                <a href="./">
            
                    
                    API
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="commons.html">
            
                <a href="commons.html">
            
                    
                    Variable definitions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="cna_demo.html">
            
                <a href="cna_demo.html">
            
                    
                    cna Demo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="c_demo.html">
            
                <a href="c_demo.html">
            
                    
                    C/C++ Demo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="go_demo.html">
            
                <a href="go_demo.html">
            
                    
                    Golang Demo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="example_demo.html">
            
                <a href="example_demo.html">
            
                    
                    Example
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.5.1" data-path="example_demo.html">
            
                <a href="example_demo.html#portscan">
            
                    
                    portscan
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.2" data-path="example_demo.html">
            
                <a href="example_demo.html#keystrokes">
            
                    
                    keystrokes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../redteam/README.md">
            
                <span>
            
                    
                    RedTeam
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../redteam/shellcode_call_crossc2.html">
            
                <a href="../redteam/shellcode_call_crossc2.html">
            
                    
                    use shellcode
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../redteam/attack_macos.html">
            
                <a href="../redteam/attack_macos.html">
            
                    
                    attack MacOS
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >API</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="api-introduction">API introduction</h1>
<p>CrossC2 can run without files on the <strong>Linux</strong> and <strong>MacOS</strong> ends, parse and load directly from memory, and finally execute the dynamic library (<strong>.so</strong> / <strong>.dylib</strong>) in the task issued by the user. ) And executable file (<strong>ELF</strong> / <strong>MachO</strong>).</p>
<p>It also reserves the information interface collected in the CobaltStrike data set, such as &apos;portscan&apos; port scan results, &apos;screenshot&apos; screenshots, keyboard records, password credentials, etc. The results can be freely designated to return, and attacks such as portscan can be easily and quickly developed Kit. At the same time, advanced interfaces such as <strong>beaconNode</strong>, <strong>ssh beacon</strong> are also reserved. If you are familiar with <strong>ExtC2</strong> or use pure custom communication C2 protocol for centralized management, you can attack metadata. The collection will be more flexible.</p>
<p>Finally, use the following method to send a task to <strong>CrossC2 beacon</strong> to load the execution file from memory.</p>
<pre><code>cna: The command is defined in the plugin, and the crossc2_load_dyn() function is called to load the execution file
bcrossc2_load_dyn($beaconid, $taskType, $taskName, $taskResType, $loadlib, $transportArg);

Executable: The header entry point will be parsed from the memory search, and finally the parameters contained in the task will be passed for execution. It also means that it can be viewed in the process, so the dynamic library execution method below is recommended.

Dynamic library file:
    1. Scenarios that require incoming parameters specify a dynamic library entry point
        int crossc2_entry(int argc, char **argv)  
        In the same way as the traditional main function, argc records the number of parameters, and argv is a two-dimensional array that points to the specific parameter values passed in.
    2. If you do not need to pass in parameters, you can use the compile-time attribute to specify the entry, and it will be executed automatically when the dynamic library is loaded.
</code></pre><p>The method of dynamic library is highly recommended, so that the process information of the executable file will not appear when the process is viewed.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../usage/android.html" class="navigation navigation-prev " aria-label="Previous page: Android">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="commons.html" class="navigation navigation-next " aria-label="Next page: Variable definitions">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"API","level":"1.4","depth":1,"next":{"title":"Variable definitions","level":"1.4.1","depth":2,"path":"api/commons.md","ref":"api/commons.md","articles":[]},"previous":{"title":"Android","level":"1.3.4","depth":2,"path":"usage/android.md","ref":"usage/android.md","articles":[]},"dir":"ltr"},"config":{"plugins":[],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"language":"en","gitbook":"*"},"file":{"path":"api/README.md","mtime":"2020-03-29T06:51:57.360Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2020-03-30T06:07:07.787Z"},"basePath":"..","book":{"language":"en"}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

